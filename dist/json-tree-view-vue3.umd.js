(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i["json-tree-view-vue3"]={},i.Vue))})(this,function(i,e){"use strict";const $=n=>({is:()=>$(n),default:()=>n}),B=n=>({is:(r,s)=>r(n)?$(s()):B(n),default:r=>r()}),b=n=>({is:(r,s)=>r(n)?$(s()):B(n)}),y=n=>()=>n,C={class:"json-view-item"},E={key:0},j=["aria-expanded"],w={class:"properties"},J={key:0},N=["role","tabindex"],A={class:"value-key"},D=["v-html"];var h=(n=>(n[n.OBJECT=0]="OBJECT",n[n.ARRAY=1]="ARRAY",n[n.VALUE=2]="VALUE",n))(h||{});const _=e.defineComponent({name:"JsonTreeViewItem",__name:"JsonTreeViewItem",props:{data:{},maxDepth:{default:1},canSelect:{type:Boolean,default:!1}},emits:["selected"],setup(n,{emit:r}){const s=n,f=r,c=e.reactive({open:s.data.depth<s.maxDepth}),u=()=>{c.open=!c.open},k=t=>f("selected",{key:t.key,value:t.value,path:t.path}),a=t=>f("selected",t),d=t=>{const o=Number(t.key);return isNaN(o)?`"${t.key}":`:`${t.key}":`},p=t=>b(typeof t).is(o=>o==="string",y("var(--jtv-string-color)")).is(o=>o==="number",y("var(--jtv-number-color)")).is(o=>o==="boolean",y("var(--jtv-boolean-color)")).is(o=>o==="object",y("var(--jtv-null-color)")).default(y("var(--jtv-valueKey-color)")),l=e.computed(()=>({"chevron-arrow":!0,opened:c.open})),V=e.computed(()=>({"value-key":!0,"can-select":s.canSelect})),S=e.computed(()=>{const t=s.data.length;return s.data.type===1?t===1?`${t} element`:`${t} elements`:t===1?`${t} property`:`${t} properties`}),m=e.computed(()=>JSON.stringify(s.data.value));return(t,o)=>{const T=e.resolveComponent("JsonTreeViewItem",!0);return e.openBlock(),e.createElementBlock("div",C,[t.data.type===0||t.data.type===1?(e.openBlock(),e.createElementBlock("div",E,[e.createElementVNode("button",{class:"data-key","aria-expanded":c.open?"true":"false",onClick:e.withModifiers(u,["stop"])},[e.createElementVNode("div",{class:e.normalizeClass(l.value)},null,2),e.createTextVNode(" "+e.toDisplayString(t.data.key)+": ",1),e.createElementVNode("span",w,e.toDisplayString(S.value),1)],8,j),c.open?(e.openBlock(),e.createElementBlock("div",J,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.data.children,g=>(e.openBlock(),e.createBlock(T,{key:d(g),data:g,maxDepth:t.maxDepth,canSelect:t.canSelect,onSelected:a},null,8,["data","maxDepth","canSelect"]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),t.data.type===2?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(V.value),role:t.canSelect?"button":void 0,tabindex:t.canSelect?"0":void 0,onClick:o[0]||(o[0]=g=>k(t.data)),onKeyup:[o[1]||(o[1]=e.withKeys(g=>k(t.data),["enter"])),o[2]||(o[2]=e.withKeys(g=>k(t.data),["space"]))]},[e.createElementVNode("span",A,e.toDisplayString(t.data.key)+":",1),e.createElementVNode("span",{style:e.normalizeStyle({color:p(t.data.value)}),"v-html":m.value},e.toDisplayString(m.value),13,D)],42,N)):e.createCommentVNode("",!0)])}}}),O=((n,r)=>{const s=n.__vccOpts||n;for(const[f,c]of r)s[f]=c;return s})(e.defineComponent({name:"JsonTreeView",__name:"JsonTreeView",props:{json:{},rootKey:{default:"/"},maxDepth:{default:1},colorScheme:{default:"light"}},emits:["selected"],setup(n,{emit:r}){const s=n,f=r,c=a=>f("selected",a),u=(a,d,p,l,V)=>{if(d instanceof Object){if(d instanceof Array){const m=d.map((t,o)=>u(o.toString(),t,p+1,V?`${l}${a}[${o}].`:`${l}`,!1));return{key:a,type:h.ARRAY,depth:p,path:l,length:m.length,children:m}}const S=Object.entries(d).map(([m,t])=>u(m,t,p+1,V?`${l}${a}.`:`${l}`,!0));return{key:a,type:h.OBJECT,depth:p,path:l,length:S.length,children:S}}else return{key:a,type:h.VALUE,path:V?`${l}${a}`:l.slice(0,-1),depth:p,value:d}},k=e.computed(()=>{const a=JSON.parse(s.json);return a instanceof Object?u(s.rootKey,{...a},0,"",!0):{key:s.rootKey,type:h.VALUE,path:"",depth:0,value:s.json}});return(a,d)=>(e.openBlock(),e.createBlock(_,{class:e.normalizeClass([{"root-item":!0,dark:a.colorScheme==="dark"}]),data:k.value,maxDepth:a.maxDepth,onSelected:c},null,8,["class","data","maxDepth"]))}}),[["__scopeId","data-v-f85384eb"]]);i.JsonTreeView=O,i.JsonTreeViewItem=_,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=json-tree-view-vue3.umd.js.map
